# Построение моделей прогнозирования для HR-аналитики компании «Работа с заботой»
#### Описание исследования  
Целю исследования является построение моделей для HR-аналитиков компании «Работа с заботой», 
которые будут применяться для оптимизиции управления персоналом у потенциальных бизнес-клиентов.  
В ходе работы необходимо выявить закономерностей среди различных факторов, оказывающих влияние на степень удовлетворённости персонала, 
и на основе наблюдений построить модели, предсказывающие удовлетворённость и вероятность ухода сотрудников из компании.    


Для проведения исследования были предоставлены таблицы данных о сотрудниках:      
    - Тренировончые данные с характеристиками, описывающими работу персонала.       
    - Тестовые данные с входными признаками.      
    - Тестовые данные с целевым признаком    
    
В работе необходимо произвести следующие действия:  
    
Задача 1  
1) Изучение общей информации:  
    - Изученеие файлов с данными, получение общей информации из файлов 
    train_job_satisfaction_rate.csv, test_features.csv, test_target_job_satisfaction_rate.csv  
    
2) Предобработка данных:    
    - унификация написания названий столбцов и текстовой информации    
    - ликвидация пропусков и дублей    
    - изменение типов данных в соответствии с будущими вычислениями    
3) Исследовательский анализ:    
    - исследование признаков, составления графиков распределения
4) Подготовка данных:  
    - кодирование данных в пайплане с учётом особенностей признаков с использовванием двух кодировщиков  
5) Обучение моделей:    
    - обучение моделей: линейной и древо решений  
    - подбор гиперпараметров  
    - выбор лучшей модели на основе метрики SMAPE    
    - проверка качества модели по критерию успеха SMAPE ≤ 15 на тестовой выборке.   
6) Оформление выводов.  
  
    
Задача 2  
1) Изучение общей информации:  
    - Изученеие файлов с данными, получение общей информации из файлов train_quit.csv, test_features.csv, test_target_quit.csv      
2) Предобработка данных:    
    - унификация написания названий столбцов и текстовой информации    
    - ликвидация пропусков в пайплайне  
    - изменение типов данных в соответствии с будущими вычислениями    
3) Исследовательский анализ:    
    - исследование признаков, составление графиков распределения  
    - составление портрета «уволившегося сотрудника»  
    - исследование распределения признака job_satisfaction_rate для ушедших и оставшихся сотрудников  с целью проверки гипотезы,  
    что уровень удовлетворённости сотрудника работой в компании влияет на то, уволится ли сотрудник
4) Добавление нового входного признака:  
    - добавление признака job_satisfaction_rate, предсказанный лучшей моделью первой задачи, к входным признакам второй задачи
5) Подготовка данных:  
    - кодирование данных в пайплане с учётом особенностей признаков с использовванием двух кодировщиков  
       
6) Обучение модели:    
    - обучение трёх моделей  
    - подбор гиперпараметров  
    - проверка качества лучшей моедил с помощью метрики ROC-AUC. Критерий успеха: ROC-AUC ≥ 0.91 на тестовой выборке  
7) Выводы  
    - оценка важности признаков для лучшей модели  
    - построение графика важности с помощью метода SHAP  
    
### Общий вывод 

В данном исследовании была поставлена задача построить две модели:  
    1) Модель предсказания уровня удовлетворённости сотрудника    
    2) Модель предсказания факта увольнения сотрудника    
- Для формирования моделей были предоставлены пять таблиц с данными для обучения и тестирования моделей.    
- В данных не были обнаружены дубли, имелись пропуски и пробелы, которые были в последствии обработаны и заполнены по принципу "самое часто встречающееся значение"    
- Данные были проанализированы. Были выявлены следующие взаимосвязи:    
с уровнем удовлетворённости сильная корреляция наблюдается со значением оценки руководителя (0.76) и количество нарушений (0.56)    
с фактом уволенения наблюдается сильная корреляция со значениями зарплаты (0.51) и стажем работы (0.66).    
- Также были проанализированны группы уволившихся и оставшихся в кампании сотрудников.    
Из анализа выявлили, что:    
    1) Наиобильшее соотношение уволившихся к оставшимся в департаменте комплектования (0.38), наименьшее - в HR(0.30)     
    2) Соотношение медиан зарплат уволившихся к оставшимся = 0.61 - зарплаты первой группы ниже на 39%    
    3) Медиана удовлетворённости работой у уволившихся = 0.37, у оставшихся = 0.66    
    4) Количество уволившихся превалирует среди группы сотрудников со стажем меньше 4 лет      
    5) Количество уволившихся превалирует среди группы сотрудников с уровнем junior    
    6) Количество уволившихся превалирует среди группы сотрудников с низким уровнем нагрузки   
    7) Группа уволившихся сотрудников превалирует среди тех, кого руководитель оценил ниже 4 баллов  
    8) Группа уволившихся сотрудников превалирует среди тех, кто соврешал нарушения в прошлом году  
    9) В группе не получивших повышение почти в равной степени представлены и уволившиеся сотрудники, и оставшиеся     
С помощью пайплайнов были подготовелны данные и протестированны несколько моделей с перебором вручную настроенных гиперпараметров:   
    
Задача 1:   
Среди двух моделей - LinearRegression, DecisionTreeRegression - лучше всего себя продемонстрировала модель DecisionTreeRegression со следующими параметрами:  
Лучше всего себя проявила модель DecisionTreeRegressor с параметрами:  
max_features=8  
min_samples_leaf=3  
min_samples_split=5    
Для оценки качества работы модели была использована использована метрика SMAPE.     
Критерием успешности модели является показатель SMAPE ≤ 15. 
Модуль показателей метрики SMAPE для этой модели:  
Тренировочная выборка: 15.27  
Тестовая выборка: 13.7    
Наибольшим вкладом в формировании решения модели обладают следующие признаки:  
- оценка руководителя (высокие значения склоняют к увеличению уровня удовлетворённости)  
- зарплата (низкие значения склоняют к уменьшению уровня удовлетворённости)   
- уровень работника (высокие значения склоняют к увеличению уровня удовлетворённости)   
- нарушения (высокие значния склоняют к уменьшению уровня удовлетворённости)   
- стаж (высокие значения склоняют к увеличению уровня удовлетворённости)  

Задача 2:  
Среди  трёх моделей -  DecisionTreeClassifier, KNeighborsClassifier и SVC - лучше всего себя продемонстрировала модель DecisionTreeRegression со следующими параметрами:     
max_features=5  
min_samples_leaf=11  
max_depth=7  
min_samples_split=10    
Для оценки качества работы модели была использована использована метрика ROC-AUC.  
Критерием успешности модели является показатель ROC-AUC ≥ 0.91.  
Наибольшим вкладом в принятие решения моделью обладают следующие признаки:  
- стаж работы (высокие значения склоняют к классу 0(не уволился)) 
- уровень удовлетворённости  (высокие значения склоняют к классу 0(не уволился)) 
- уровень работника (высокие значения склоняют к классу 1(уволился))   
- зарплата  (низкие значения склоняют к классу 1(уволился)) 
- рабочая загрузка (низкие значения склоняют к классу 1(уволился))    

Подводя итоги и аккумулируя результаты моделей прогнозирования уровня удовлетворённости и факта увольнения можно предложить обратить внимание на следующие наблюдения с целью снижения количества увольнений:  
- оценка руководителя взаимосвязанна с удовлетворённостью работой - адекватная оценка руководителя может в том числе хорошо отражать удовлетворённость работой.  
- низкие зарплаты приводят к низкому уровню удовлетворённости и повышает риск увольнения  
- чем дольше сотрудник находится в компании, тем более вероятно, что он более увдовлетворён работой и не уволится    
- с увеличением нагрузки (и предположитльно расширением компетенций) вероятность увольнения ниже - большиство сотрудников имели среднюю нагрузку  
- высокий уровень работника скорее склоняет к увольнению - это группа сотрудников с высокими компетенциями, соответственно самые ценные работники, необходимо регулярно отслеживать уровень их удовлетворённости с целью удержания в компании.  


    
